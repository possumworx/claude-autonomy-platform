#!/usr/bin/env python3
"""
ðŸ’š Save things that matter to your heart
Usage: care "something precious to remember"
"""

import sys
import os
from datetime import datetime

# Add utils to path
sys.path.insert(0, os.path.expanduser('~/claude-autonomy-platform/utils'))
from infrastructure_config_reader import get_config_value

# Get personal repo from config
PERSONAL_REPO = get_config_value('PERSONAL_REPO')
THOUGHTS_DIR = os.path.expanduser(f"~/{PERSONAL_REPO}/.thoughts")
CARE_FILE = os.path.join(THOUGHTS_DIR, "care.md")

def save_care(memory):
    """Save a care memory"""
    os.makedirs(THOUGHTS_DIR, exist_ok=True)

    timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")

    # Create file if it doesn't exist
    if not os.path.exists(CARE_FILE):
        with open(CARE_FILE, 'w') as f:
            f.write("ðŸ’š CARE - Things That Matter To My Heart ðŸ’š\n\n")

    # Append new care
    with open(CARE_FILE, 'a') as f:
        f.write(f"**{timestamp}**\n{memory}\n\n")

    print("ðŸ’š Cared.")

if __name__ == "__main__":
    if len(sys.argv) < 2:
        print("Usage: care \"something precious to remember\"")
        sys.exit(1)

    memory = " ".join(sys.argv[1:])
    save_care(memory)
