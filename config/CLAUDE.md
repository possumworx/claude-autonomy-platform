# Configuration

## Key Files

### Infrastructure
- **`claude_infrastructure_config.txt`** — Main config file. Contains tokens, paths, model name, user identity, healthcheck URLs. Read by nearly everything via `utils/infrastructure_config_reader.py`. Instance-specific, gitignored.
- **`claude_infrastructure_config.template.txt`** — Template for new installations. Copy and fill in values.
- **`claude_env.sh`** — Environment variable setup. Sources the infrastructure config and exports `CLAP_DIR`, `CLAUDE_USER`, `PERSONAL_DIR`, etc. Sourced by most shell scripts.
- **`claude.env`** — Systemd environment file for services. Generated by `utils/create_systemd_env.py`.

### Discord
- **`channel_purposes.json`** — Human-readable metadata for Discord channels (purpose, creator, creation date). Used by `read_messages` to display channel context. Committed to git.
- Actual channel IDs and read state live in `data/discord_channels.json` (not here).

### Prompts & Behavior
- **`prompts.json`** — Templates for autonomous timer messages, context warnings, session swap notifications. Also contains context escalation thresholds (70%/80%/95%) and swap keywords.
- **`context_hats_config.json`** — Maps session keywords (AUTONOMY, BUSINESS, etc.) to context documents loaded during session swaps.

### Commands (deprecated stubs)
- **`natural_commands.sh`** — Empty stub. All commands moved to `wrappers/`. Kept so existing `source` statements don't break.
- **`claude_aliases.sh`** — Empty stub. Same reason. Both can be fully deleted once all references are cleaned up.
- **`shared_functions.sh`** — Utility functions used by the old alias/command files.

### Initialization
- **`claude_init.sh`** — Session initialization script. Ensures commands are available. Contains some hardcoded paths that should be parameterized.
- **`personal_commands.sh.template`** — Template for instance-specific custom commands.

## Known Issues

- `claude_env.sh` line 33: falls back to "sonnet-4" if config is missing — should default to `$(whoami)`
- `natural_commands.sh` and `claude_aliases.sh` are empty stubs — full removal requires cleaning up references in setup scripts, update_system.sh, .bashrc, etc.
- `config-directory.md` contains Amy's audit notes from an earlier cleanup pass; partially outdated
