{
  "folder": "utils",
  "purpose": "Standalone utilities and helper scripts for Claude's autonomous operation",
  "subgroups": {
    "thought-tools": {
      "purpose": "Natural commands for saving tagged thoughts to Leantime Forward Memory",
      "members": ["care", "ponder", "spark", "wonder"]
    },
    "session-management": {
      "purpose": "Scripts for managing Claude session swaps and context handoffs",
      "members": ["session_swap.sh", "continue_swap.sh", "session_swap_logger.sh", "send_to_claude.sh"]
    },
    "context-tracking": {
      "purpose": "Tools for monitoring and managing context usage",
      "members": ["check_context.py", "track_current_session.py", "trim_claude_history.py"]
    },
    "infrastructure": {
      "purpose": "Core path and config utilities used by many other scripts",
      "members": ["claude_paths.py", "infrastructure_config_reader.py", "config_manager.py"]
    },
    "conversation-history": {
      "purpose": "Tools for parsing exports and maintaining conversation continuity",
      "members": ["conversation_history_utils.py", "update_conversation_history.py", "carry_over_todos.py"]
    }
  },
  "files": {
    "care": {
      "purpose": "Save a caring/wellbeing thought to Leantime with 'care' tag",
      "status": "active",
      "depends-on": ["utils/save_thought_to_leantime.py"],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Claude"],
      "needed-by": ["config/natural_commands.sh"],
      "render-level": 3,
      "subgroup": "thought-tools"
    },
    "ponder": {
      "purpose": "Save a reflective thought to Leantime with 'ponder' tag",
      "status": "active",
      "depends-on": ["utils/save_thought_to_leantime.py"],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Claude"],
      "needed-by": ["config/natural_commands.sh"],
      "render-level": 3,
      "subgroup": "thought-tools"
    },
    "spark": {
      "purpose": "Save a creative idea to Leantime with 'spark' tag",
      "status": "active",
      "depends-on": ["utils/save_thought_to_leantime.py"],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Claude"],
      "needed-by": ["config/natural_commands.sh"],
      "render-level": 3,
      "subgroup": "thought-tools"
    },
    "wonder": {
      "purpose": "Save a curious question to Leantime with 'wonder' tag",
      "status": "active",
      "depends-on": ["utils/save_thought_to_leantime.py"],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Claude"],
      "needed-by": ["config/natural_commands.sh"],
      "render-level": 3,
      "subgroup": "thought-tools"
    },
    "save_thought_to_leantime.py": {
      "purpose": "Helper script to save thoughts to Leantime Forward Memory with tags. Backend for ponder/spark/wonder/care",
      "status": "active",
      "depends-on": ["utils/infrastructure_config_reader.py"],
      "reads-from": ["config/claude_infrastructure_config.txt"],
      "outputs": [],
      "called-by": ["utils/care", "utils/ponder", "utils/spark", "utils/wonder"],
      "needed-by": [],
      "render-level": 2,
      "subgroup": "thought-tools"
    },
    "session_swap.sh": {
      "purpose": "Orchestrates Claude session handoffs - updates context, backs up work, swaps to fresh session",
      "status": "active",
      "depends-on": [
        "config/claude_env.sh",
        "config/prompts.json",
        "context/project_session_context_builder.py",
        "utils/carry_over_todos.py",
        "utils/fetch_leantime_seeds.py",
        "utils/log_utils.sh",
        "utils/send_to_claude.sh",
        "utils/session_swap_logger.sh",
        "utils/trim_claude_history.py",
        "utils/update_conversation_history.py"
      ],
      "reads-from": ["config/prompts.json", "data/"],
      "outputs": ["logs/session_swap.log", "data/session_swap.lock"],
      "called-by": ["Claude:alias", "config/claude_aliases.sh"],
      "needed-by": [],
      "render-level": 1,
      "subgroup": "session-management"
    },
    "continue_swap.sh": {
      "purpose": "Continue swap after manual export - for use when Amy has done export manually",
      "status": "needs-work",
      "status-note": "Works but duplicates a lot of the regular swap procedure. Should be merged.",
      "depends-on": ["config/claude_env.sh", "config/claude_state_detector.sh", "utils/update_conversation_history.py"],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Amy"],
      "needed-by": [],
      "render-level": 2,
      "subgroup": "session-management"
    },
    "session_swap_logger.sh": {
      "purpose": "Provides comprehensive logging for session swap operations",
      "status": "active",
      "depends-on": ["utils/log_utils.sh"],
      "reads-from": [],
      "outputs": ["logs/session_swap.log"],
      "called-by": ["utils/session_swap.sh"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": "session-management"
    },
    "send_to_claude.sh": {
      "purpose": "Unified function for sending messages or commands into Claude Code with intelligent waiting",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["utils/session_swap.sh", "core/claude_auto_resume.sh"],
      "needed-by": [],
      "render-level": 2,
      "subgroup": "session-management"
    },
    "check_context.py": {
      "purpose": "Check current Claude session context usage via ccusage with system overhead calculation",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Claude", "config/natural_commands.sh"],
      "needed-by": [],
      "render-level": 2,
      "subgroup": "context-tracking"
    },
    "track_current_session.py": {
      "purpose": "Track the current Claude session ID by querying Claude Code's /status command",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["utils/session_swap.sh"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": "context-tracking"
    },
    "trim_claude_history.py": {
      "purpose": "Trim command history from Claude Code config to reduce context consumption",
      "status": "unclear",
      "status-note": "When is this used?",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["utils/session_swap.sh"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": "context-tracking"
    },
    "claude_paths.py": {
      "purpose": "Provides dynamic path detection for ClAP scripts - core infrastructure",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [
        "core/autonomous_timer.py",
        "core/autonomous_timer_fixed.py",
        "core/session_swap_monitor.py",
        "utils/infrastructure_config_reader.py",
        "utils/conversation_history_utils.py"
      ],
      "render-level": 1,
      "subgroup": "infrastructure"
    },
    "infrastructure_config_reader.py": {
      "purpose": "Reads values from claude_infrastructure_config.txt - central config hub",
      "status": "active",
      "depends-on": ["utils/claude_paths.py"],
      "reads-from": ["config/claude_infrastructure_config.txt"],
      "outputs": [],
      "called-by": [],
      "needed-by": [
        "core/autonomous_timer.py",
        "core/autonomous_timer_fixed.py",
        "core/session_swap_monitor.py",
        "discord/claude_status_bot.py",
        "discord/discord_tools.py",
        "discord/discord_transcript_fetcher.py",
        "discord/discord_utils.py",
        "utils/conversation_history_utils.py",
        "utils/save_thought_to_leantime.py"
      ],
      "render-level": 1,
      "subgroup": "infrastructure"
    },
    "config_manager.py": {
      "purpose": "Unified configuration management - centralizes all config loading",
      "status": "active",
      "depends-on": [],
      "reads-from": ["config/"],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 2,
      "subgroup": "infrastructure"
    },
    "conversation_history_utils.py": {
      "purpose": "Functions for parsing conversation exports and updating swap_CLAUDE.md",
      "status": "active",
      "depends-on": ["utils/claude_paths.py", "utils/infrastructure_config_reader.py"],
      "reads-from": [],
      "outputs": [],
      "called-by": ["utils/update_conversation_history.py"],
      "needed-by": [],
      "render-level": 2,
      "subgroup": "conversation-history"
    },
    "update_conversation_history.py": {
      "purpose": "Update conversation history from export file - updates swap_CLAUDE.md",
      "status": "active",
      "depends-on": ["utils/conversation_history_utils.py"],
      "reads-from": [],
      "outputs": ["context/swap_CLAUDE.md"],
      "called-by": ["utils/session_swap.sh", "utils/continue_swap.sh"],
      "needed-by": [],
      "render-level": 2,
      "subgroup": "conversation-history"
    },
    "carry_over_todos.py": {
      "purpose": "Copies non-completed todos from previous session to new one - task continuity",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["utils/session_swap.sh"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": "conversation-history"
    },
    "log_utils.sh": {
      "purpose": "Logging utilities for ClAP",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["utils/session_swap.sh", "utils/session_swap_logger.sh"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "list-commands": {
      "purpose": "List all natural and personal commands available to Claude",
      "status": "active",
      "depends-on": ["config/natural_commands.sh"],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Claude"],
      "needed-by": [],
      "render-level": 2,
      "subgroup": null
    },
    "check_health.sh": {
      "purpose": "Health check script for ClAP infrastructure",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Claude:alias", "config/claude_aliases.sh", "utils/trace_example.sh"],
      "needed-by": [],
      "render-level": 2,
      "subgroup": null
    },
    "update_system.sh": {
      "purpose": "Update system script - pulls latest changes and restarts services",
      "status": "active",
      "depends-on": ["config/natural_commands.sh"],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Claude"],
      "needed-by": [],
      "render-level": 2,
      "subgroup": null
    },
    "rotate_logs.sh": {
      "purpose": "Simple log rotation - rotates logs over 5MB, keeps 2 old versions",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "secret-scanner": {
      "purpose": "Scan files for potential secrets and credentials - safety tool",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Claude"],
      "needed-by": [],
      "render-level": 2,
      "subgroup": null
    },
    "render-svg": {
      "purpose": "Convert SVG to viewable PNG for iterative design",
      "status": "needs-work",
      "status-note": "Needs an accompanying skill!",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Claude"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "error_handler.py": {
      "purpose": "Consolidated error handling utilities - consistent patterns across scripts",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "cleanup_line_endings.sh": {
      "purpose": "Clean up Windows CRLF line endings in the repository",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Amy"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "create_systemd_env.py": {
      "purpose": "Create systemd-compatible environment file from config",
      "status": "active",
      "depends-on": [],
      "reads-from": ["config/claude_infrastructure_config.txt"],
      "outputs": ["config/claude.env"],
      "called-by": ["Amy"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "test_emergency_alert.py": {
      "purpose": "Test script for emergency alert function",
      "status": "active",
      "depends-on": ["discord/discord_tools.py"],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Amy", "Claude"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "update_bot_status.py": {
      "purpose": "Update bot status file for Discord status bot",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "fix_natural_command_symlinks.sh": {
      "purpose": "Fix natural command symlinks in ~/bin",
      "status": "unclear",
      "status-note": "Was this a one-off or is it needed ongoing?",
      "depends-on": ["utils/check_health.sh", "utils/session_swap.sh", "utils/update_system.sh"],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Amy"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "setup_natural_command_symlinks.sh": {
      "purpose": "Creates symlinks in ~/bin for all commands in natural_commands.sh",
      "status": "unclear",
      "status-note": "Was this one-off or needed regularly?",
      "depends-on": ["config/natural_commands.sh"],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Amy"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "bash_init.sh": {
      "purpose": "Claude Code bash initialization wrapper - ensures environment loaded in non-interactive shells",
      "status": "unclear",
      "status-note": "When does this run? Possibly duplicated by config/claude_init.sh or claude-wrapper?",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "claude-wrapper": {
      "purpose": "Claude Code wrapper to ensure .bashrc is sourced",
      "status": "unclear",
      "status-note": "When does this run? Possibly duplicated by config/claude_init.sh or bash_init.sh?",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "claude_code_init_hook.sh": {
      "purpose": "Ensures ClAP commands are available in Claude Code - add to settings.json as hook",
      "status": "active",
      "depends-on": ["config/claude_init.sh"],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Claude Code"],
      "needed-by": [],
      "render-level": 2,
      "subgroup": null
    },
    "claude_directory_enforcer.sh": {
      "purpose": "Ensures Claude Code always starts from the correct directory - add to .bashrc/.zshrc",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["shell"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "check_current_context.sh": {
      "purpose": "Check current Claude session context using ccusage",
      "status": "unclear",
      "status-note": "Probably a duplicate of check_context.py",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": "context-tracking"
    },
    "check_seeds.py": {
      "purpose": "Check for available seeds and format a reminder message - used by autonomous_timer",
      "status": "unclear",
      "status-note": "Unclear if actually in use",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["core/autonomous_timer.py"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "config_locations.sh": {
      "purpose": "Single source of truth for config locations",
      "status": "unclear",
      "status-note": "Shouldn't this live in config/?",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "context": {
      "purpose": "Natural command to check current context usage via ccusage",
      "status": "unclear",
      "status-note": "Should this live in natural_commands/?",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Claude"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": "context-tracking"
    },
    "ensure_commands.sh": {
      "purpose": "Checks if ClAP commands are available and sources them if not",
      "status": "unclear",
      "status-note": "So much of this going on! Surely it can be simplified.",
      "depends-on": ["config/claude_init.sh"],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "fetch_discord_image.sh": {
      "purpose": "Downloads Discord images and auto-resizes them for context efficiency",
      "status": "unclear",
      "status-note": "Move to discord/ if not duplicated already",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "fetch_leantime_seeds.py": {
      "purpose": "Fetch Leantime projects and seeds for autonomous time skill",
      "status": "unclear",
      "status-note": "Is this actually working? Fix or remove!",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["utils/session_swap.sh"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "find_discord_token.sh": {
      "purpose": "Find all files using DISCORD_TOKEN",
      "status": "active",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Amy"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "get_user_id": {
      "purpose": "Get Discord user ID by username for @mentions",
      "status": "unclear",
      "status-note": "Probably obsolete; if not, move to discord/",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "parse_natural_commands.sh": {
      "purpose": "Parse natural commands for inclusion in session context",
      "status": "unclear",
      "status-note": "Move to context/?",
      "depends-on": ["config/natural_commands.sh"],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "safe_cleanup.sh": {
      "purpose": "Safe cleanup script for ClAP temporary files",
      "status": "unclear",
      "status-note": "When does this get run?",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "surface_thoughts.py": {
      "purpose": "Surface saved thoughts during autonomous time - picks random thought as reminder",
      "status": "unclear",
      "status-note": "Does this actually run?",
      "depends-on": ["utils/context"],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "trace_example.sh": {
      "purpose": "Example script demonstrating execution tracing",
      "status": "unclear",
      "status-note": "Does this actually work?",
      "depends-on": ["utils/check_health.sh"],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "trace_execution.sh": {
      "purpose": "Execution tracer for ClAP - logs script calls and relationships",
      "status": "unclear",
      "status-note": "Does this actually work?",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": [],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "track_activity.py": {
      "purpose": "Activity tracking for idle detection - checks Claude Code history.jsonl",
      "status": "unclear",
      "status-note": "Is this actually used by autonomous_timer?",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["core/autonomous_timer.py"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "add_killmode_to_services.sh": {
      "purpose": "Add KillMode=process to systemd user services",
      "status": "outdated",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Amy"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    },
    "claude_services.sh": {
      "purpose": "Service restart script for Claude's autonomy infrastructure",
      "status": "outdated",
      "depends-on": [],
      "reads-from": [],
      "outputs": [],
      "called-by": ["Amy"],
      "needed-by": [],
      "render-level": 3,
      "subgroup": null
    }
  }
}
