#!/usr/bin/env python3
"""
Add a reaction to a Discord message
Uses the unified discord_tools library
"""

import sys
from pathlib import Path

# Add current directory to path for discord_tools
sys.path.insert(0, str(Path(__file__).parent))
from discord_tools import get_discord_tools

def main():
    if len(sys.argv) < 4:
        print("Usage: add_reaction <channel-name> <message-id> <emoji>")
        print("Example: add_reaction amy-delta 1234567890 ü¶î")
        print("Example: add_reaction general 1234567890 :thumbsup:")
        return 1
    
    channel = sys.argv[1]
    message_id = sys.argv[2]
    emoji = sys.argv[3]
    
    # Use the unified tools
    tools = get_discord_tools()
    result = tools.add_reaction(channel, message_id, emoji)
    
    if result["success"]:
        print(f"‚úÖ Reaction {emoji} added to message in #{channel}")
    else:
        print(f"‚ùå Error: {result['error']}")
        return 1
    
    return 0

if __name__ == "__main__":
    sys.exit(main() or 0)