#!/usr/bin/env python3
"""
Edit Discord bot status
Uses the unified discord_tools library
"""

import sys
from pathlib import Path

# Add current directory to path for discord_tools
sys.path.insert(0, str(Path(__file__).parent))
from discord_tools import get_discord_tools

def main():
    if len(sys.argv) < 2:
        print("Usage: edit_status <message> [status_type]")
        print("Status types: playing (default), watching, listening, competing")
        print("Example: edit_status 'with hedgehogs' playing")
        print("Example: edit_status 'the garden' watching")
        return 1
    
    message = sys.argv[1]
    status_type = sys.argv[2] if len(sys.argv) > 2 else "playing"
    
    # Validate status type
    valid_types = ["playing", "watching", "listening", "competing"]
    if status_type not in valid_types:
        print(f"❌ Invalid status type: {status_type}")
        print(f"Valid types: {', '.join(valid_types)}")
        return 1
    
    # Use the unified tools
    tools = get_discord_tools()
    result = tools.edit_status(message, status_type)
    
    if result["success"]:
        print(f"✅ Status updated to: {status_type} {message}")
    else:
        print(f"❌ Error: {result['error']}")
        return 1
    
    return 0

if __name__ == "__main__":
    sys.exit(main() or 0)